import{k as F,o as p,c as L,n as $,N as Q,C as M,b as T,w as b,ab as Ie,a3 as te,L as ne,H as D,T as be,a4 as ie,e as x,X as Ce,r as K,a as R,t as A,d as fe,ak as Re,al as Ae,h as v,l as Y,J as Pe,a8 as Ee,D as Ve,g as _,a7 as Ne,j as Fe,a9 as He,x as ge,O as Ue,ao as ke}from"./framework.5246819e.js";import{F as ze,e as We,z as Ze,I as Ge,N,w as $e,S as ue,U as Je,Y as _e,p as Xe,X as qe,f as Ye,g as Qe,r as Ke,o as el,h as ll,W as ol,t as al,j as tl,m as nl,c as J,n as he,G as we,Z as il,Q as sl,s as se,u as rl,v as ee,x as pe,A as dl}from"../app.cd29ea8a.js";import{C as cl}from"./index-7-Sfienm.436e48ef.js";import"./effect-fade.b0b8a2b6.js";import"./theme.85079795.js";import"./index.11fe8007.js";const ul=fe({name:"IconInfoCircleFill",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:l}){const o=$e("icon");return{cls:_(()=>[o,`${o}-info-circle-fill`,{[`${o}-spin`]:e.spin}]),innerStyle:_(()=>{const t={};return e.size&&(t.fontSize=ue(e.size)?`${e.size}px`:e.size),e.rotate&&(t.transform=`rotate(${e.rotate}deg)`),t}),onClick:t=>{l("click",t)}}}}),pl=["stroke-width","stroke-linecap","stroke-linejoin"],vl=[F("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm2-30a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2Zm0 17h1a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-6a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1h1v-8a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v11Z",fill:"currentColor",stroke:"none"},null,-1)];var re=ze(ul,[["render",function(e,l,o,t,d,i){return p(),L("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:$(e.cls),style:Q(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:l[0]||(l[0]=(...c)=>e.onClick&&e.onClick(...c))},vl,14,pl)}]]);const fl=Object.assign(re,{install:(e,l)=>{var o;const t=(o=l==null?void 0:l.iconPrefix)!=null?o:"";e.component(t+re.name,re)}}),ml=({modalRef:e,wrapperRef:l,draggable:o,alignCenter:t})=>{const d=v(!1),i=v([0,0]),c=v([0,0]),C=v(),f=v([0,0]),m=v([0,0]),y=O=>{if(d.value){const B=O.x-i.value[0],a=O.y-i.value[1];let n=c.value[0]+B,u=c.value[1]+a;n<f.value[0]&&(n=f.value[0]),n>m.value[0]&&(n=m.value[0]),u<f.value[1]&&(u=f.value[1]),u>m.value[1]&&(u=m.value[1]),C.value=[n,u]}},g=()=>{d.value=!1,pe(window,"mousemove",y),pe(window,"mouseup",g)};return{position:C,handleMoveDown:O=>{o.value&&(O.preventDefault(),d.value=!0,(()=>{var B,a,n;if(l.value&&e.value){const{top:u,left:H}=l.value.getBoundingClientRect(),{clientWidth:E,clientHeight:k}=l.value,{top:X,left:U,width:W,height:Z}=e.value.getBoundingClientRect(),I=t.value?0:(B=e.value)==null?void 0:B.offsetTop,V=U-H,z=X-u-I;V===((a=c.value)==null?void 0:a[0])&&z===((n=c.value)==null?void 0:n[1])||(c.value=[V,z]);const q=E>W?E-W:0,G=k>Z?k-Z-I:0;q===m.value[0]&&G===m.value[1]||(m.value=[q,G]),I&&(f.value=[0,0-I])}})(),i.value=[O.x,O.y],ee(window,"mousemove",y),ee(window,"mouseup",g),ee(window,"contextmenu",g))}}};var yl=Object.defineProperty,xe=Object.getOwnPropertySymbols,bl=Object.prototype.hasOwnProperty,Cl=Object.prototype.propertyIsEnumerable,Oe=(e,l,o)=>l in e?yl(e,l,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[l]=o,gl=fe({name:"Modal",components:{ClientOnly:Je,ArcoButton:_e,IconHover:Xe,IconClose:qe,IconInfoCircleFill:fl,IconCheckCircleFill:Ye,IconExclamationCircleFill:Qe,IconCloseCircleFill:Ke},inheritAttrs:!1,props:{visible:{type:Boolean,default:void 0},defaultVisible:{type:Boolean,default:!1},width:{type:[Number,String]},top:{type:[Number,String]},mask:{type:Boolean,default:!0},title:{type:String},titleAlign:{type:String,default:"center"},alignCenter:{type:Boolean,default:!0},unmountOnClose:Boolean,maskClosable:{type:Boolean,default:!0},hideCancel:{type:Boolean,default:!1},simple:{type:Boolean,default:e=>e.notice},closable:{type:Boolean,default:!0},okText:String,cancelText:String,okLoading:{type:Boolean,default:!1},okButtonProps:{type:Object},cancelButtonProps:{type:Object},footer:{type:Boolean,default:!0},renderToBody:{type:Boolean,default:!0},popupContainer:{type:[String,Object],default:"body"},maskStyle:{type:Object},modalClass:{type:[String,Array]},modalStyle:{type:Object},onBeforeOk:{type:Function},onBeforeCancel:{type:Function},escToClose:{type:Boolean,default:!0},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},maskAnimationName:{type:String,default:e=>e.fullscreen?"fade-in-standard":"fade-modal"},modalAnimationName:{type:String,default:e=>e.fullscreen?"zoom-in":"zoom-modal"},bodyClass:{type:[String,Array]},bodyStyle:{type:[String,Object,Array]},messageType:{type:String},hideTitle:{type:Boolean,default:!1}},emits:{"update:visible":e=>!0,ok:e=>!0,cancel:e=>!0,open:()=>!0,close:()=>!0,beforeOpen:()=>!0,beforeClose:()=>!0},setup(e,{emit:l}){const{fullscreen:o,popupContainer:t,alignCenter:d}=Ne(e),i=$e("modal"),{t:c}=el(),C=v(),f=v(),m=v(e.defaultVisible),y=_(()=>{var r;return(r=e.visible)!=null?r:m.value}),g=v(!1),O=_(()=>e.okLoading||g.value),B=_(()=>e.draggable&&!e.fullscreen),{teleportContainer:a,containerRef:n}=ll({popupContainer:t,visible:y}),u=v(y.value),H=_(()=>e.okText||c("modal.okText")),E=_(()=>e.cancelText||c("modal.cancelText")),{zIndex:k,isLastDialog:X}=ol("dialog",{visible:y});let U=!1;const W=r=>{e.escToClose&&r.key===dl.ESC&&X()&&oe(r)},Z=()=>{e.escToClose&&!U&&(U=!0,ee(document.documentElement,"keydown",W))},I=()=>{U=!1,pe(document.documentElement,"keydown",W)};let V=0;const{position:z,handleMoveDown:q}=ml({wrapperRef:C,modalRef:f,draggable:B,alignCenter:d}),G=()=>{V++,g.value&&(g.value=!1),m.value=!1,l("update:visible",!1)},oe=r=>{var w;let h=!0;J(e.onBeforeCancel)&&(h=(w=e.onBeforeCancel())!=null&&w),h&&(l("cancel",r),G())},ae=v(!1),{setOverflowHidden:me,resetOverflow:ye}=(r=>{const w=v(!1),h={overflow:"",width:"",boxSizing:""};return{setOverflowHidden:()=>{if(r.value){const s=r.value;if(!w.value&&s.style.overflow!=="hidden"){const S=al(s);(S>0||tl(s))&&(h.overflow=s.style.overflow,h.width=s.style.width,h.boxSizing=s.style.boxSizing,s.style.overflow="hidden",s.style.width=s.offsetWidth-S+"px",s.style.boxSizing="border-box",w.value=!0)}}},resetOverflow:()=>{if(r.value&&w.value){const s=r.value;s.style.overflow=h.overflow,s.style.width=h.width,s.style.boxSizing=h.boxSizing,w.value=!1}}}})(n);Fe(()=>{n.value=nl(e.popupContainer),y.value&&(me(),e.escToClose&&Z())}),He(()=>{ye(),I()}),ge(y,r=>{m.value!==r&&(m.value=r),r?(l("beforeOpen"),u.value=!0,ae.value=!1,me(),Z()):(l("beforeClose"),I())}),ge(o,()=>{z.value&&(z.value=void 0)});const je=_(()=>[`${i}-wrapper`,{[`${i}-wrapper-align-center`]:e.alignCenter&&!e.fullscreen,[`${i}-wrapper-moved`]:!!z.value}]),Me=_(()=>[`${i}`,e.modalClass,{[`${i}-simple`]:e.simple,[`${i}-draggable`]:B.value,[`${i}-fullscreen`]:e.fullscreen}]),Le=_(()=>{var r;const w=((h,s)=>{for(var S in s||(s={}))bl.call(s,S)&&Oe(h,S,s[S]);if(xe)for(var S of xe(s))Cl.call(s,S)&&Oe(h,S,s[S]);return h})({},(r=e.modalStyle)!=null?r:{});return e.width&&!e.fullscreen&&(w.width=ue(e.width)?`${e.width}px`:e.width),!e.alignCenter&&e.top&&(w.top=ue(e.top)?`${e.top}px`:e.top),z.value&&(w.transform=`translate(${z.value[0]}px, ${z.value[1]}px)`),w});return{prefixCls:i,mounted:u,computedVisible:y,containerRef:n,wrapperRef:C,mergedModalStyle:Le,okDisplayText:H,cancelDisplayText:E,zIndex:k,handleOk:async r=>{const w=V,h=await new Promise(async s=>{var S;if(J(e.onBeforeOk)){let j=e.onBeforeOk((De=!0)=>s(De));if(!he(j)&&we(j)||(g.value=!0),he(j))try{j=(S=await j)==null||S}catch{j=!1}we(j)&&s(j)}else s(!0)});w===V&&(h?(l("ok",r),G()):g.value&&(g.value=!1))},handleCancel:oe,handleMaskClick:r=>{e.mask&&e.maskClosable&&ae.value&&oe(r)},handleMaskMouseDown:r=>{r.target===C.value&&(ae.value=!0)},handleOpen:()=>{y.value&&(!il(C.value,document.activeElement)&&document.activeElement instanceof HTMLElement&&document.activeElement.blur(),l("open"))},handleClose:()=>{y.value||(B.value&&(z.value=void 0),u.value=!1,ye(),l("close"))},mergedOkLoading:O,modalRef:f,wrapperCls:je,modalCls:Me,teleportContainer:a,handleMoveDown:q}}}),le=ze(gl,[["render",function(e,l,o,t,d,i){const c=M("icon-info-circle-fill"),C=M("icon-check-circle-fill"),f=M("icon-exclamation-circle-fill"),m=M("icon-close-circle-fill"),y=M("icon-close"),g=M("icon-hover"),O=M("arco-button"),B=M("client-only");return p(),T(B,null,{default:b(()=>[(p(),T(Ie,{to:e.teleportContainer,disabled:!e.renderToBody},[!e.unmountOnClose||e.computedVisible||e.mounted?te((p(),L("div",ne({key:0,class:`${e.prefixCls}-container`,style:{zIndex:e.zIndex}},e.$attrs),[D(be,{name:e.maskAnimationName,appear:""},{default:b(()=>[e.mask?te((p(),L("div",{key:0,ref:"maskRef",class:$(`${e.prefixCls}-mask`),style:Q(e.maskStyle)},null,6)),[[ie,e.computedVisible]]):x("v-if",!0)]),_:1},8,["name"]),F("div",{ref:"wrapperRef",class:$(e.wrapperCls),onClick:l[2]||(l[2]=Ce((...a)=>e.handleMaskClick&&e.handleMaskClick(...a),["self"])),onMousedown:l[3]||(l[3]=Ce((...a)=>e.handleMaskMouseDown&&e.handleMaskMouseDown(...a),["self"]))},[D(be,{name:e.modalAnimationName,appear:"",onAfterEnter:e.handleOpen,onAfterLeave:e.handleClose},{default:b(()=>[te(F("div",{ref:"modalRef",class:$(e.modalCls),style:Q(e.mergedModalStyle)},[!e.hideTitle&&(e.$slots.title||e.title||e.closable)?(p(),L("div",{key:0,class:$(`${e.prefixCls}-header`),onMousedown:l[1]||(l[1]=(...a)=>e.handleMoveDown&&e.handleMoveDown(...a))},[e.$slots.title||e.title?(p(),L("div",{key:0,class:$([`${e.prefixCls}-title`,`${e.prefixCls}-title-align-${e.titleAlign}`])},[e.messageType?(p(),L("div",{key:0,class:$(`${e.prefixCls}-title-icon`)},[e.messageType==="info"?(p(),T(c,{key:0})):x("v-if",!0),e.messageType==="success"?(p(),T(C,{key:1})):x("v-if",!0),e.messageType==="warning"?(p(),T(f,{key:2})):x("v-if",!0),e.messageType==="error"?(p(),T(m,{key:3})):x("v-if",!0)],2)):x("v-if",!0),K(e.$slots,"title",{},()=>[R(A(e.title),1)])],2)):x("v-if",!0),!e.simple&&e.closable?(p(),L("div",{key:1,tabindex:"-1",role:"button","aria-label":"Close",class:$(`${e.prefixCls}-close-btn`),onClick:l[0]||(l[0]=(...a)=>e.handleCancel&&e.handleCancel(...a))},[D(g,null,{default:b(()=>[D(y)]),_:1})],2)):x("v-if",!0)],34)):x("v-if",!0),F("div",{class:$([`${e.prefixCls}-body`,e.bodyClass]),style:Q(e.bodyStyle)},[K(e.$slots,"default")],6),e.footer?(p(),L("div",{key:1,class:$(`${e.prefixCls}-footer`)},[K(e.$slots,"footer",{},()=>[e.hideCancel?x("v-if",!0):(p(),T(O,ne({key:0},e.cancelButtonProps,{onClick:e.handleCancel}),{default:b(()=>[R(A(e.cancelDisplayText),1)]),_:1},16,["onClick"])),D(O,ne({type:"primary"},e.okButtonProps,{loading:e.mergedOkLoading,onClick:e.handleOk}),{default:b(()=>[R(A(e.okDisplayText),1)]),_:1},16,["loading","onClick"])])],2)):x("v-if",!0)],6),[[ie,e.computedVisible]])]),_:3},8,["name","onAfterEnter","onAfterLeave"])],34)],16)),[[ie,e.computedVisible||e.mounted]]):x("v-if",!0)],8,["to","disabled"]))]),_:3})}]]),kl=Object.defineProperty,hl=Object.defineProperties,wl=Object.getOwnPropertyDescriptors,Se=Object.getOwnPropertySymbols,xl=Object.prototype.hasOwnProperty,Ol=Object.prototype.propertyIsEnumerable,Be=(e,l,o)=>l in e?kl(e,l,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[l]=o,P=(e,l)=>{for(var o in l||(l={}))xl.call(l,o)&&Be(e,o,l[o]);if(Se)for(var o of Se(l))Ol.call(l,o)&&Be(e,o,l[o]);return e};const de=(e,l)=>{let o=sl("modal");const t=D(le,P(P(P({},{visible:!0,renderToBody:!1,unmountOnClose:!0,onOk:()=>{t.component&&(t.component.props.visible=!1),J(e.onOk)&&e.onOk()},onCancel:()=>{t.component&&(t.component.props.visible=!1),J(e.onCancel)&&e.onCancel()},onClose:async()=>{await Ue(),o&&(ke(null,o),document.body.removeChild(o)),o=null,J(e.onClose)&&e.onClose()}}),rl(e,["content","title","footer","visible","unmountOnClose","onOk","onCancel","onClose"])),{footer:typeof e.footer=="boolean"?e.footer:void 0}),{default:se(e.content),title:se(e.title),footer:typeof e.footer!="boolean"?se(e.footer):void 0});return(l??ve._context)&&(t.appContext=l??ve._context),ke(t,o),document.body.appendChild(o),{close:()=>{t.component&&(t.component.props.visible=!1)},update:d=>{t.component&&Object.entries(d).forEach(([i,c])=>{t.component.props[i]=c})}}},ce=P({open:de,confirm:(e,l)=>{const o=P({simple:!0,messageType:"warning"},e);return de(o,l)}},We.reduce((e,l)=>(e[l]=(o,t)=>{const d=P({simple:!0,hideCancel:!0,messageType:l},o);return de(d,t)},e),{})),ve=Object.assign(le,(Te=P({},ce),hl(Te,wl({install:(e,l)=>{Ze(e,l);const o=Ge(l);e.component(o+le.name,le);const t={};for(const d of Object.keys(ce))t[d]=(i,c=e._context)=>ce[d](i,c);e.config.globalProperties.$modal=t},_context:null}))));var Te;const Sl=F("i",{class:"rtdp xinzeng"},null,-1),Bl=F("i",{class:"rtdp caozuo-bianji"},null,-1),Ll=fe({__name:"index",props:{disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},size:{default:"small"},options:{default:()=>({maskClosable:!1,loading:!1,index:!1,indexWidth:60,columns:[],menuWidth:245,search:!1,searchSpan:6,searchBtnSpan:6})}},emits:["handleSave","handleUpdate"],setup(e,{expose:l,emit:o}){const t=Re(()=>Ae(()=>import("./index-wnCDjdji.90ec939f.js"),["assets/chunks/index-wnCDjdji.90ec939f.js","assets/app.cd29ea8a.js","assets/chunks/framework.5246819e.js","assets/chunks/theme.85079795.js","assets/chunks/effect-fade.b0b8a2b6.js","assets/chunks/index.11fe8007.js","assets/chunks/index-UN4Bz1v9.f6840577.js","assets/chunks/index--3RNvleF.1ca71b70.js"])),d=v(null),i=v(!1),c=v(""),C=v(!1),f=v(""),m=()=>{i.value=!1},y=()=>{i.value=!1,d.value.done()},g=a=>{C.value=!0,a==="add"&&d.value.handleSave(),a==="edit"&&d.value.handleUpdate()},O=(a,n,u)=>{o("handleSave",a,n,u)},B=(a,n,u)=>{o("handleUpdate",a,n,u)};return l({handleOpenModel:(a,n)=>{f.value=a,a==="add"&&(c.value=N.global.t("modal.addTitle")),a==="edit"&&(c.value=N.global.t("modal.editTitle"),d.value.deepClone(n)),a==="see"&&(c.value=N.global.t("modal.viewTitle"),d.value.deepClone(n)),i.value=!0}}),(a,n)=>{const u=_e,H=cl,E=ve;return p(),T(E,{visible:i.value,"onUpdate:visible":n[4]||(n[4]=k=>i.value=k),"align-center":!1,footer:f.value!=="see","mask-closable":a.options.maskClosable,top:"20vh",width:"65%",onCancel:y,onOk:m},{title:b(()=>[R(A(c.value),1)]),footer:b(()=>[D(H,null,{default:b(()=>[D(u,{size:a.size,onClick:y},{default:b(()=>[R(A(Y(N).global.t("arcomodals.cancelBtn")),1)]),_:1},8,["size"]),f.value==="add"?(p(),T(u,{key:0,loading:C.value,size:a.size,type:"primary",onClick:n[2]||(n[2]=k=>g("add"))},{icon:b(()=>[Sl]),default:b(()=>[R(" "+A(Y(N).global.t("arcomodals.saveBtn")),1)]),_:1},8,["loading","size"])):x("",!0),f.value==="edit"?(p(),T(u,{key:1,loading:C.value,size:a.size,type:"primary",onClick:n[3]||(n[3]=k=>g("edit"))},{icon:b(()=>[Bl]),default:b(()=>[R(" "+A(Y(N).global.t("arcomodals.updateBtn")),1)]),_:1},8,["loading","size"])):x("",!0)]),_:1})]),default:b(()=>[(p(),T(Pe(Y(t)),{ref_key:"modalRef",ref:d,Loading:C.value,"onUpdate:Loading":n[0]||(n[0]=k=>C.value=k),Visible:i.value,"onUpdate:Visible":n[1]||(n[1]=k=>i.value=k),modelType:f.value,options:a.options,size:a.size,onHandleSave:O,onHandleUpdate:B},Ee({_:2},[Ve(a.options.columns,(k,X)=>({name:k.dataIndex+"Label",fn:b(()=>[K(a.$slots,k.dataIndex+"Label")])}))]),1064,["Loading","Visible","modelType","options","size"]))]),_:3},8,["visible","footer","mask-closable"])}}});export{Ll as default};
